(this["webpackJsonpapp-react"]=this["webpackJsonpapp-react"]||[]).push([[0],{123:function(e,t,n){"use strict";n.r(t),n.d(t,"Context",(function(){return Oe}));var c=n(0),r=n(25),a=n.n(r),s=n(6),i=n(24),o="/admin",u="/login",l="/reg",j="/",b="/okno",d=n(133),h=n(125),p=n(132),O=n(87),m=n(13),f=n(12),x=n(1),v=Object(m.a)((function(){var e=Object(c.useContext)(Oe).user,t=Object(f.g)(),n=function(){e.setUser({}),e.setIsAuth(!1)};return Object(x.jsx)(d.a,{bg:"dark",variant:"dark",children:Object(x.jsxs)(h.a,{children:[Object(x.jsx)(i.b,{className:"ml-0 container",style:{color:"white",paddingLeft:45,fontSize:"1.4em"},to:j,children:"\u0421\u041a\u041b\u0410\u0414\u0421\u041a\u0418\u0415 \u041e\u0421\u0422\u0410\u0422\u041a\u0418"}),e.isAuth?Object(x.jsx)(h.a,{className:"mr-auto",children:Object(x.jsxs)(p.a,{children:[Object(x.jsx)(O.a,{variant:"outline-light",onClick:function(){return t.push(o)},className:"mr-0",children:"\u0410\u0434\u043c\u0438\u043d\u043a\u0430"}),Object(x.jsx)(O.a,{variant:"outline-light",onClick:function(){return t.push(u)},className:"mr-5",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(x.jsx)(O.a,{variant:"outline-light",onClick:n,className:"mr-5",children:"\u0412\u044b\u0445\u043e\u0434"})]})}):Object(x.jsx)(h.a,{className:"mr-auto",children:Object(x.jsxs)(p.a,{children:[Object(x.jsx)(O.a,{variant:"outline-light",onClick:function(){return t.push(o)},className:"mr-0",disabled:!0,children:"\u0410\u0434\u043c\u0438\u043d\u043a\u0430"}),Object(x.jsx)(O.a,{variant:"outline-light",onClick:function(){return t.push(u)},className:"mr-5",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(x.jsx)(O.a,{variant:"outline-light",onClick:n,className:"mr-5",children:"\u0412\u044b\u0445\u043e\u0434"})]})})]})})})),y=(n(75),n(7)),g=n(2),k=n(43),C=n(134),N=n(131),w=n(126),S=n(88),_=n(29),T=n(15),A=n.n(T),I=n(74),E=n.n(I),H=E.a.create({baseURL:"http://192.168.1.116:5000"}),U=E.a.create({baseURL:"http://192.168.1.116:5000"});U.interceptors.request.use((function(e){return e.headers.authorization="Bearer ".concat(localStorage.getItem("token")),e}));var B=function(){var e=Object(_.a)(A.a.mark((function e(t){var n,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("type",t),e.next=3,U.post("api/type",t);case 3:return n=e.sent,c=n.data,console.log("created Type",c),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(_.a)(A.a.mark((function e(){var t,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.get("api/type");case 2:return t=e.sent,n=t.data,console.log("data[fetchTypes]",n),e.abrupt("return",n.rows);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(_.a)(A.a.mark((function e(t){var n,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.get("api/type/"+t);case 2:return n=e.sent,c=n.data,console.log("oneType",c),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(_.a)(A.a.mark((function e(t){var n,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.delete("api/type/"+t);case 2:return n=e.sent,c=n.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=Object(m.a)((function(e){var t=e.show,n=e.onHide,r=Object(c.useContext)(Oe).ogo;Object(c.useEffect)((function(){z().then((function(e){return r.setTypes(e)}))}),[]);var a=Object(c.useState)(""),i=Object(s.a)(a,2),o=i[0],u=i[1],l=Object(c.useState)([]),j=Object(s.a)(l,2),b=j[0],d=j[1],h=Object(c.useState)(""),p=Object(s.a)(h,2),m=p[0],f=p[1],v=Object(c.useState)(""),_=Object(s.a)(v,2),T=_[0],A=_[1],I=function(e,t,n){d(b.map((function(c){return c.number===n?Object(g.a)(Object(g.a)({},c),{},Object(y.a)({},e,t)):c})))};return Object(x.jsxs)(C.a,{show:t,onHide:n,centered:!0,children:[Object(x.jsx)(C.a.Header,{closeButton:!0,children:Object(x.jsx)(C.a.Title,{id:"contained-modal-title-vcenter",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0442\u0438\u043f \u043e\u043a\u043d\u0430"})}),Object(x.jsx)(C.a.Body,{children:Object(x.jsxs)(N.a,{children:[Object(x.jsx)(N.a.Control,{className:"mt-2 ",placeholder:"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0438\u043f\u0430",value:o,onChange:function(e){return u(e.target.value)}}),Object(x.jsx)(N.a.Control,{className:"mt-2 ",placeholder:"\u0446\u0435\u043d\u0430",value:m,onChange:function(e){return f(e.target.value)}}),Object(x.jsx)(N.a.Control,{className:"mt-2 custom-file-input",placeholder:"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",type:"file",onChange:function(e){return function(e){A(e.target.files[0])}(e)}}),b.map((function(e){return Object(x.jsxs)(w.a,{className:"mt-2",children:[Object(x.jsx)(S.a,{md:4,children:Object(x.jsx)(N.a.Control,{placeholder:"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:e.title,onChange:function(t){return I("title",t.target.value,e.number)}})}),Object(x.jsx)(S.a,{md:4,children:Object(x.jsx)(N.a.Control,{placeholder:"\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",value:e.desc,onChange:function(t){return I("desc",t.target.value,e.number)}})}),Object(x.jsx)(S.a,{md:4,children:Object(x.jsx)(O.a,{variant:"outline-dark",className:"btn btn-danger",onClick:function(){return t=e.number,void d(b.filter((function(e){return e.number!==t})));var t},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]},e.number)})),Object(x.jsx)(O.a,{className:"w-100 mt-2 btn-secondary",variant:"outline-dark",onClick:function(){d([].concat(Object(k.a)(b),[{title:"",desc:"",number:Date.now()}]))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u043d\u0444\u043e"})]})}),Object(x.jsxs)(C.a.Footer,{className:"d-flex justify-content-between",children:[Object(x.jsx)(O.a,{className:"btn btn-success",variant:"outline-dark",onClick:function(){var e=new FormData;e.append("type",o),e.append("price",m),e.append("img",T),e.append("info",JSON.stringify(b)),B(e).then((function(e){return n()}))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),Object(x.jsx)(O.a,{onClick:n,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})})),L=function(){var e=Object(f.g)(),t=Object(c.useState)(!1),n=Object(s.a)(t,2),r=n[0],a=n[1];return Object(x.jsxs)(h.a,{className:"d-flex flex-column mt-4",children:[Object(x.jsx)(O.a,{className:"btn btn-success mt-2",variant:"outline-dark",onClick:function(){return a(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0442\u0438\u043f \u043e\u043a\u043d\u0430"}),Object(x.jsx)(O.a,{className:"btn btn-danger mt-2",variant:"outline-dark",onClick:function(){return e.push("/db")},children:"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0411\u0414"}),Object(x.jsx)(O.a,{className:"btn btn-secondary mt-2",variant:"outline-dark",children:"\u0415\u0449\u0435 \u0447\u0435\u0442\u043e \u043d\u0430 \u0432\u0441\u044f\u043a\u0438\u0439 \u0441\u043b\u0443\u0447\u0430\u0439"}),Object(x.jsx)(K,{show:r,onHide:function(){return a(!1)}})]})},F=n(135),R=n(66),q=function(){var e=Object(_.a)(A.a.mark((function e(t,n){var c,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.post("api/user/reg",{email:t,password:n,role:"ADMIN"});case 3:return c=e.sent,r=c.data,localStorage.setItem("token",r.token),e.abrupt("return",Object(R.a)(r.token));case 9:e.prev=9,e.t0=e.catch(0),console.log("######",e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(_.a)(A.a.mark((function e(t,n){var c,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.post("api/user/login",{email:t,password:n});case 2:return c=e.sent,r=c.data,localStorage.setItem("token",r.token),e.abrupt("return",Object(R.a)(r.token));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=Object(m.a)((function(){var e=Object(f.h)(),t=Object(c.useContext)(Oe).user,n=Object(f.g)(),r=e.pathname===u;console.log(r);var a=Object(c.useState)(""),o=Object(s.a)(a,2),b=o[0],d=o[1],p=Object(c.useState)(""),m=Object(s.a)(p,2),v=m[0],y=m[1],g=function(){var e=Object(_.a)(A.a.mark((function e(c,a){var s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=7;break}return e.next=4,M(c,a);case 4:s=e.sent,e.next=10;break;case 7:return e.next=9,q(c,a);case 9:s=e.sent;case 10:return t.setUser(t),t.setIsAuth(!0),n.push(j),e.abrupt("return",s);case 16:e.prev=16,e.t0=e.catch(0),alert(e.t0.response.data.ApiError);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(x.jsx)(h.a,{className:"d-flex justify-content-center align-items-center",style:{height:window.innerHeight-54},children:Object(x.jsxs)(F.a,{style:{width:600},className:"p-5",children:[Object(x.jsx)("h2",{className:"m-auto",children:r?"\u0412\u043e\u0439\u0442\u0438":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(x.jsxs)(N.a,{className:"d-flex flex-column",children:[Object(x.jsx)(N.a.Control,{placeholder:"input email",className:"mt-3",onChange:function(e){return d(e.target.value)},value:b,autoComplete:"true"}),Object(x.jsx)(N.a.Control,{placeholder:"input password",className:"mt-3",type:"password",autoComplete:"true",onChange:function(e){return y(e.target.value)},value:v}),Object(x.jsxs)(w.a,{className:"d-flex mt-3 justify-content-between",children:[Object(x.jsx)(O.a,{onClick:function(){return g(b,v)},className:"m-3 pr-3",variant:"outline-success",children:r?"\u0412\u043e\u0439\u0442\u0438":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(x.jsx)(i.b,{to:l,className:"mt-1",children:r?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f":""})]})]})]})})})),G=P,Q=function(){return Object(x.jsx)("div",{children:"Basket"})},V=n(127),W=Object(m.a)((function(e){var t=e.okitem,n=Object(f.g)();return Object(x.jsx)(S.a,{className:"mt-4",onClick:function(){return n.push("/okno/"+t.id)},children:Object(x.jsxs)(F.a,{style:{width:200,cursor:"pointer",textAlign:"center"},border:"light",className:"d-flex  ml-1",children:[Object(x.jsx)(V.a,{fluid:!0,height:200,src:"http://192.168.1.116:5000/"+t.img}),Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsx)("div",{children:t.type}),Object(x.jsxs)("div",{children:[t.price," rub"]})]})]})})})),X=Object(m.a)((function(){var e=Object(c.useContext)(Oe).ogo,t=Object(c.useState)([]),n=Object(s.a)(t,2);n[0],n[1];return Object(x.jsx)(w.a,{className:"d-flex",children:e.types.map((function(e){return Object(x.jsx)(W,{okitem:e},e.id)}))})})),Y=n(136),Z=Object(m.a)((function(){var e=Object(c.useContext)(Oe).ogo;return Object(x.jsx)(h.a,{className:"mt-4",children:Object(x.jsx)(Y.a,{children:e.types.map((function(t){return Object(x.jsxs)(Y.a.Item,{className:"mt-2",style:{cursor:"pointer"},active:t.id===e.selectedType.id,onClick:function(){return e.setSelectedType(t)},children:[t.type," - ",t.price," \u0440\u0443\u0431."]},t.id)}))})})})),$=Object(m.a)((function(){var e=Object(c.useContext)(Oe).ogo;return Object(c.useEffect)((function(){z().then((function(t){return e.setTypes(t)}))}),[]),console.log("ogo",e),Object(x.jsx)(h.a,{children:Object(x.jsxs)(w.a,{children:[Object(x.jsx)(S.a,{md:3,children:Object(x.jsx)(Z,{})}),Object(x.jsx)(S.a,{md:2,children:Object(x.jsx)(X,{})})]})})})),ee=Object(m.a)((function(){var e=Object(c.useState)({info:[]}),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(f.i)().id;return Object(c.useEffect)((function(){D(a).then((function(e){return r(e)}))}),[]),Object(x.jsxs)(h.a,{className:"d-flex flex-column mt-2",children:[Object(x.jsx)(S.a,{md:4,children:Object(x.jsx)(V.a,{width:400,src:"http://192.168.1.116:5000/"+n.img,className:"ml-0 mt-2"})}),Object(x.jsxs)(w.a,{className:"d-flex justify-content-between mt-1 mx-1 w-700",children:[Object(x.jsx)(S.a,{md:5,className:"border border-primary",children:Object(x.jsxs)("div",{className:"d-flex flex-row  justify-content-between border mt-3",children:[Object(x.jsx)("h2",{className:"border",children:n.type}),Object(x.jsxs)("h2",{className:"border",children:[n.price," \u0440\u0443\u0431."]})]})}),Object(x.jsx)(S.a,{md:7,className:"border",children:Object(x.jsxs)("div",{className:"border border-dark p-1",children:[Object(x.jsxs)("div",{className:"border border-warning",children:[Object(x.jsx)("h4",{children:"\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435: ==="})," "]}),Object(x.jsx)("div",{className:"border border-warning",children:Object(x.jsx)("h4",{children:"\u0412 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0435: ==="})})]})})]}),Object(x.jsxs)(F.a,{className:"d-flex justify-content-around align-items-center",children:[Object(x.jsx)("h3",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),n.info.map((function(e,t){return Object(x.jsxs)(w.a,{style:{backgroundColor:t%2===0?"lightgray":"darkgray",width:"90%"},className:"ml-1",children:[e.title,": ",e.desc]},e.id)}))]})]})})),te=function(){return Object(x.jsx)("div",{children:"Types"})},ne=n(129),ce=n(128),re=function(e){var t=e.props,n=e.clickHandler,r=e.btnName,a=Object(c.useState)(t.checked),i=Object(s.a)(a,2),o=i[0],u=i[1];return Object(x.jsx)(ce.a,Object(g.a)(Object(g.a)({},t),{},{type:"checkbox",checked:o,size:"sm",className:"mt-1",value:"1",variant:"outline-primary",onChange:function(e){return u(e.currentTarget.checked)},onClick:n,children:o?"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e":r}))},ae=Object(m.a)((function(){var e=Object(f.g)(),t=Object(c.useContext)(Oe).ogo,n=Object(c.useState)([]),r=Object(s.a)(n,2),a=r[0],i=r[1],o=Object(c.useState)(!1),u=Object(s.a)(o,2),l=u[0],j=(u[1],Object(c.useState)([])),b=Object(s.a)(j,2);b[0],b[1];Object(c.useEffect)((function(){z().then((function(e){return t.setTypes(e)}))}),[a]);return Object(x.jsx)(h.a,{className:"d-flex mt-2",children:Object(x.jsxs)(w.a,{children:[Object(x.jsx)(S.a,{children:Object(x.jsx)(ne.a,{children:Object(x.jsx)(O.a,{onClick:function(){return z().then((function(e){return i(e)}))},children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u0437 \u0411\u0414"})})}),Object(x.jsx)(S.a,{children:Object(x.jsx)(Y.a,{children:t.types.map((function(n){return Object(x.jsxs)(Y.a.Item,{className:"d-flex flex-column",children:[Object(x.jsxs)("div",{children:["id: ",n.id]}),Object(x.jsxs)("div",{children:["type: ",n.type]}),Object(x.jsx)(re,{clickHandler:function(){return e=n,void t.setShop(e);var e},btnName:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e",props:{id:n.id,checked:l}}),Object(x.jsx)(O.a,{size:"sm",className:"mt-1",variant:"outline-secondary",onClick:function(){return e.push("/okno/"+n.id)},children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"}),Object(x.jsx)(O.a,{className:"mt-1",variant:"outline-danger",onClick:function(){return e=n.id,J(e),void z().then((function(e){return i(e)}));var e},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0438\u043f"})]},n.id)}))})})]})})})),se=[],ie=[{path:o,Component:L},{path:"/db",Component:ae},{path:"/basket",Component:Q},{path:j,Component:$},{path:"/auth",Component:G},{path:u,Component:G},{path:l,Component:G},{path:b,Component:ee},{path:"/okno/:id",Component:ee},{path:"/type",Component:te}],oe=function(){var e=Object(c.useContext)(Oe).user;return Object(x.jsxs)(f.d,{children:[e.isAuth&&se.map((function(e){var t=e.path,n=e.Component;return Object(x.jsx)(f.b,{path:t,component:n,exact:!0},t)})),ie.map((function(e){var t=e.path,n=e.Component;return Object(x.jsx)(f.b,{path:t,component:n,exact:!0},t)})),Object(x.jsx)(f.a,{to:j})]})},ue=n(130),le=Object(m.a)((function(){var e=Object(c.useContext)(Oe).user,t=Object(c.useState)(!0),n=Object(s.a)(t,2),r=n[0],a=n[1];return Object(c.useEffect)((function(){return e.setUser(!0),e.setIsAuth(!0),a(!1)}),[]),r?Object(x.jsx)(ue.a,{animation:"grow"}):Object(x.jsxs)(i.a,{children:[Object(x.jsx)(v,{}),Object(x.jsx)(oe,{})]})})),je=n(33),be=n(34),de=n(14),he=function(){function e(){Object(je.a)(this,e),this._types=[],this._amount=[{id:1,type:"OK1",count:5},{id:2,type:"OK2",count:5},{id:3,type:"OK3",count:5}],this._shop=[],this._type={},this._selectedType={},Object(de.d)(this)}return Object(be.a)(e,[{key:"setTypes",value:function(e){this._types=e}},{key:"setType",value:function(e){this._type=e}},{key:"setShop",value:function(e){this._shop=e}},{key:"setAmount",value:function(e){this._amount=e}},{key:"types",get:function(){return this._types}},{key:"type",get:function(){return this._type}},{key:"amount",get:function(){return this._amount}},{key:"shop",get:function(){return this._shop}},{key:"setSelectedType",value:function(e){this._selectedType=e}},{key:"selectedType",get:function(){return this._selectedType}}]),e}(),pe=function(){function e(){Object(je.a)(this,e),this._isAuth=!0,this._user={},Object(de.d)(this)}return Object(be.a)(e,[{key:"setIsAuth",value:function(e){this._isAuth=e}},{key:"setUser",value:function(e){this._user=e}},{key:"isAuth",get:function(){return this._isAuth}},{key:"user",get:function(){return this._user}}]),e}(),Oe=Object(c.createContext)(null);a.a.render(Object(x.jsx)(Oe.Provider,{value:{user:new pe,ogo:new he},children:Object(x.jsx)(le,{})}),document.getElementById("root"))},75:function(e,t,n){}},[[123,1,2]]]);
//# sourceMappingURL=main.b2aed691.chunk.js.map